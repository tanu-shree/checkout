"use strict";angular.module("newappApp",["ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","resource.loader","user.auth"]).config(["$routeProvider","$locationProvider","userauthProvider",function(a,b,c){a.when("/",{templateUrl:"views/checkout.html",controller:"CheckoutCtrl",controllerAs:"checkout"}).otherwise({redirectTo:"/"}),b.html5Mode(!0),c.setFbSettings({appId:"1168184359859767",cookie:!0,xfbml:!0,version:"v2.5"}),c.setFbLoginRtnSettings({scope:"user_photos,email,publish_actions,public_profile",return_scopes:!0}),c.setGoogleSettings({client_id:"987460405552-9bbspnouuev4pgvg7gms3m464bq8b6df.apps.googleusercontent.com",cookiepolicy:"single_host_origin"})}]),angular.module("newappApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("newappApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("newappApp").controller("CheckoutCtrl",["$scope","$location","$rootScope","CheckoutService","checkoutDetailData",function(a,b,c,d,e){a.processing=!0,a.token="8134bb03f3a22101e53c083939b1f653_8091317_605",a.tabInfo=!1,a.checkoutDetailsData=e,a.customerDetail={name:null,email:null,mobile:"",coupon:"",discount:0},a.isCheckedReliability=!0,d.getOrderDetails(8001).then(function(b){a.processing=!1,e.details=b.data,console.log(e),a.CheckoutDetail=b.data.order,console.log(a.CheckoutDetail),a.customerDetail={name:a.CheckoutDetail.customer_details.name,email:a.CheckoutDetail.customer_details.email,mobile:a.CheckoutDetail.customer_details.contactNo},a.$broadcast("checkout",a.CheckoutDetail)}),d.getPaymentOptions().then(function(b){a.PaymentOptions=b.data.payment,e.paymentOptions=a.PaymentOptions,console.log("1")})}]);var url="http://dev.travelyaari.com";angular.module("newappApp").factory("CheckoutService",["$http","$q",function(a,b){var c={book:function(c,d,e,f,g,h){var i=b.defer();return a({url:url+c+"?o="+d+"&b="+g+"&ajx=1&pay_method="+e+"&pay_provider="+f+"&ver=v2",method:"POST",data:h,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}).then(function(a){i.resolve(a)}),i.promise},getPayPalAmount:function(){var c=b.defer();return a({cache:!0,url:url+"/api/transaction/paypalAmount/",method:"GET"}).then(function(a){c.resolve(a)}),c.promise},getJusPayApplicability:function(){var c=b.defer();return a({cache:!0,url:url+"/api/juspay/isJuspayApplicable/",method:"GET"}).then(function(a){c.resolve(a)}),c.promise},executePg:function(c,d){var e=b.defer();return a({url:c,method:"POST",data:d,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}).then(function(a){e.resolve(a)}),e.promise},getOrderStatus:function(c){var d=b.defer();return a({cache:!0,url:url+"/api/juspay/getOrderStatus?orderid="+c,method:"GET"}).then(function(a){d.resolve(a)}),d.promise},updateOrder:function(c){var d=b.defer();return a({url:url+"/api/juspay/updateOrder/",method:"POST",data:c,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}).then(function(a){d.resolve(a)}),d.promise},createOrder:function(c){var d=b.defer();return a({url:url+"/api/juspay/createOrder/",method:"POST",data:c,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}).then(function(a){d.resolve(a)}),d.promise},getOrderDetails:function(c){var d=b.defer();return a({cache:!0,url:url+"/api/v2/transactions/orderDetails?orderId="+c,method:"GET"}).then(function(a){d.resolve(a)}),d.promise},getPaymentOptions:function(c){var d=b.defer();return a({cache:!0,url:url+"/api/v2/transactions/paymentOptions",method:"GET"}).then(function(a){d.resolve(a)}),d.promise},getSavedCards:function(){var c=b.defer();return a({url:url+"/api/juspay/getCards",method:"GET"}).then(function(a){c.resolve(a)}),c.promise},removeSavedCards:function(c){var d=b.defer();return a({url:url+"/api/juspay/deleteCard",method:"POST",data:c,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}).then(function(a){d.resolve(a)}),d.promise},checkCoupon:function(c,d){var e=b.defer();return a({url:url+"/api/transaction/applyCoupon/?cc="+c,method:"POST",data:d,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}).then(function(a){e.resolve(a)}),e.promise},checkLogin:function(c){var d=b.defer();return a({url:url+"/api/v2/account/login/",method:"POST",data:c,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}).then(function(a){d.resolve(a)}),d.promise}};return c}]),angular.module("newappApp").directive("tyYourDetails",function(){return{scope:!1,templateUrl:"views/yourdetail.html",restrict:"E",controller:["$scope","CheckoutService",function(a,b){function c(){var c={coupon:a.customerDetail.coupon,token:a.token};b.checkCoupon(a.customerDetail.coupon,c).then(function(b){1==b.data.success?(a.customerDetail.discount=b.data.discountAmount,a.couponMsg="You just saved Rs."+a.customerDetail.discount+" on the fare"):(a.customerDetail.discount=0,a.couponMsg=b.data.errorMsg)})}a.firstSection=!0,a.confirmBooking=function(){if(null!=a.customerDetail.email&&null!=a.customerDetail.mobile){a.firstSection=!1,a.tabInfo=!0;var b=angular.element(document.querySelector(".paymentMethod"));b.removeAttr("style")}},a.edit=function(){a.firstSection=!0,a.tabInfo=!1;var b=angular.element(document.querySelector(".paymentMethod"));b.attr("style","margin-top:100px; opacity: 0.2;")};var d=new Array;d.push(8),d.push(9),d.push(46),d.push(36),d.push(35),d.push(37),d.push(39),a.checkKeyPressed=function(b){if("emailInput"==b.target.id){var e=0==b.keyCode?b.charCode:b.keyCode,f=e>=48&&57>=e||e>=65&&90>=e||e>=97&&122>=e||64==e||95==e||46==e||-1!=d.indexOf(b.keyCode)&&b.charCode!=b.keyCode;0==f&&b.preventDefault()}else if("phoneInput"==b.target.id){var e=0==b.keyCode?b.charCode:b.keyCode,f=e>=48&&57>=e||-1!=d.indexOf(b.keyCode)&&b.charCode!=b.keyCode;0==f&&b.preventDefault()}else"couponInput"==b.target.id&&13==b.keyCode&&(null!=a.customerDetail.coupon?c():(a.customerDetail.discount=0,a.couponMsg="Please Enter Coupon Code"))}}],link:function(a,b,c){}}}),angular.module("newappApp").directive("tyPaymentMethod",function(){return{scope:{payment:"=",tabinfo:"=",token:"=",customerdetail:"=",orderid:"="},templateUrl:"views/paymentmethod.html",restrict:"E",controller:["$scope","$sce","$window","$interval","checkoutConstant","CheckoutService","NetBank","Wallet","OtherOption","Card",function(a,b,c,d,e,f,g,h,i,j){function k(b,c){var d=a.$watch(b,function(e,f){void 0!=a[b]&&(d(),c())},!0)}function l(b){1===a.checkIfSelectedInData(b,a.walletTnc)&&(a.walletPopup=!0)}function m(){var b=new Date;for(var c in a.payment.offers.wallet)for(var d=a.payment.offers.wallet[c],e=0;e<d.length;e++){var f=new Date(d[e].validFrom),g=new Date(d[e].validTill);if(b>=f&&g>=b){a.walletSubtitle[c]=d[e].subtitle,a.walletMsg[c]=d[e].msg,a.walletTnc[c]=d[e].tnc;break}}console.log("printing wallet msg"),console.log(a.walletMsg)}function n(b,c){a.method=b,a.provider=c}function o(){var b={};switch(b.token=a.token,b.pay_method=a.method,b.pay_provider=a.provider,0!=a.customerdetail.discount?b.coupon=a.customerdetail.coupon:b.coupon="",b.customerName=a.customerdetail.name,b.mobile=a.customerdetail.mobile,b.email=a.customerdetail.email,a.method){case a.CONSTANT.CREDIT_CARD:n(a.method,a.ccinfo.type),b.pay_provider=a.provider,b.cardNo=a.ccinfo.securityCode,b.billing_cust_name=a.ccinfo.name,b.card_exp_month=a.ccinfo.month,b.card_exp_year=a.ccinfo.year,b.cardCVV=a.ccinfo.cvv,b.paydebug=a.method;break;case a.CONSTANT.NETBANK:b.paydebug=a.method;break;case a.CONSTANT.OTHER_OPTION:b.paydebug=a.method;break;default:b.paydebug="unknown-"+b.pay_method,a.showSavedCard===!0&&(b.brand=a.brand)}return b}function p(b){var c=a.selected,d="";switch(b){case a.CONSTANT.CREDIT_CARD:a.showSavedCard===!0?(c=a.CONSTANT.EXPRESS,q(a.selectedCard.card_brand,a.selectedCard.card_type)):(d=a.ccinfo.type,n(c,a.ccinfo.type));break;case a.CONSTANT.NETBANK:d=y,n(c,d);break;case a.CONSTANT.WALLET:d=x,n(c,d);break;case a.CONSTANT.OTHER_OPTION:d=z,n(c,d)}}function q(b,c){switch(b){case"VISA":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_VISA,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_VISA,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b);break;case"MASTERCARD":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_MASTER,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_MASTER,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b);break;case"AMEX":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_AMEX,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_AMEX,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b);break;case"DISCOVER":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_DISCOVER,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_DISCOVER,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b);break;case"UNIONPAY":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_UNIONPAY,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_UNIONPAY,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b);break;case"JCB":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_JCB,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_JCB,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b);break;case"LASER":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_LASER,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_LASER,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b);break;case"DINERSCLUB":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_DINERS,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_DINERS,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b);break;case"MAESTRO":c===a.CONSTANT.EXPRESS_CARD_TYPE_CREDIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_CC_MAESTRO,b):c===a.CONSTANT.EXPRESS_CARD_TYPE_DEBIT?r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DC_MAESTRO,b):r(a.CONSTANT.EXPRESS,a.CONSTANT.EXPRESS_DEFAULT,b)}}function r(b,c,d){a.method=b,a.provider=c,a.brand=d}function s(c,e){console.log("prinitng post data"),console.log(c);var g="";g="/api/transaction/checkout/",f.book(g,a.token,a.method,a.provider,e,c).then(function(c){console.log(c),a.BookingResponse=c.data,c.data.success===!0&&(a.pgSubmission=b.trustAsHtml(a.BookingResponse.data.pgFormData),null!=document.getElementById("paymentForm")?document.getElementById("paymentForm").submit():w=d(t,500))})}function t(){null!=document.getElementById("paymentForm")&&(d.cancel(w),document.getElementById("paymentForm").submit())}function u(){f.getSavedCards().then(function(b){a.SavedCards=b.data,a.SavedCards=[{card_token:"e97f4671-b15a-4812-b879-3d6da2456157",card_reference:"bbcdac4bcd8e37118eeaa4f17eb36b73",card_number:"4929-XXXXXXXX-9309",card_isin:"492998",card_exp_year:"2018",card_exp_month:"04",card_type:"CREDIT",card_issuer:"BARCLAYS BANK PLC",card_brand:"VISA",nickname:"",name_on_card:"Test",expired:!1,card_fingerprint:"47sc2ipi182a6umkij41gs78b9"},{card_token:"e97f4671-b15a-4812-b879-3d6da2456158",card_reference:"bbcdac4bcd8e37118eeaa4f17eb36b73",card_number:"4929-XXXXXXXX-9309",card_isin:"492998",card_exp_year:"2018",card_exp_month:"04",card_type:"CREDIT",card_issuer:"BARCLAYS BANK PLC",card_brand:"AMEX",nickname:"",name_on_card:"Test",expired:!1,card_fingerprint:"47sc2ipi182a6umkij41gs78b9"}],""!=b.data?(a.showSavedCard=!0,a.selectedCard={card_token:b.data[0].card_token,card_fingerprint:b.data[0].card_fingerprint,card_brand:b.data[0].card_brand,card_type:b.data[0].card_type},q(a.selectedCard.card_brand,a.selectedCard.card_type)):(a.showSavedCard=!1,a.selectedCard={})})}function v(){document.cookie.indexOf(e.COOKIE_FOR_LOGGED_IN)>=0&&u()}var w,x="",y="",z="";a.walletPopup=!1,a.CONSTANT=e,a.data={repeatSelect:""},a.currentYear=(new Date).getFullYear(),a.currentMonth=(new Date).getMonth()+1,a.ccinfo={type:void 0},a.selected=a.CONSTANT.CREDIT_CARD,a.Wallet=h,a.NetBank=g,a.OtherOption=i,a.Card=j,a.showSavedCard=!1,a.selectedCard={card_token:"",card_fingerprint:"",card_brand:"",card_type:"",cvv:[]},a.walletSubtitle=[],a.walletMsg=[],a.walletTnc=[],v(),k("payment",function(){x=Object.keys(a.payment.options.wallet.previlaged)[0],y=Object.keys(a.payment.options.nb.popular)[0],z=Object.keys(a.payment.options.op.all)[0],a.test=a.payment.offers.wallet.paytm_wallet[0].tnc,m(),n(a.selected,"")}),a.selectedOption=function(b){a.selected=b,a.walletPopup=!1,null!=a.SavedCards&&(a.showSavedCard=!0),p(a.selected)},a.isSelected=function(b){return b===a.selected},a.isWalletOptionSelected=function(a){return x===a},a.selectWallet=function(b){x=b,n(a.selected,b),l(b)},a.isWalletOptionSelected=function(a){return x===a},a.isNetBankOptionSelected=function(a){return y===a},a.selectBank_all=function(b){n(a.selected,b),y=b},a.selectBank_popular=function(b){n(a.selected,b),a.data.repeatSelect=null,y=b},a.selectOtherOption=function(b){z=b,n(a.selected,b)},a.isOtherOptionSelected=function(a){return z===a},a.removeSavedCard=function(b){if(c.confirm("Do you want to continue?")?a.result="Yes":a.result="No","Yes"===a.result){var d={card_token:b.card_token,card_fingerprint:b.card_fingerprint};f.removeSavedCards(d).then(function(a){a.data["delete"]===!0&&u()})}},a.selectCard=function(b){a.selectedCard.card_token=b.card_token,a.selectedCard.card_fingerprint=b.card_fingerprint,a.selectedCard.card_brand=b.card_brand,a.selectedCard.card_type=b.card_type,q(a.selectedCard.card_brand,a.selectedCard.card_type),console.log(a.method+" "+a.provider),console.log(a.selectedCard)},a.checkIfSelectedInData=function(a,b){for(var c in b)if(0===c.localeCompare(a))return 1;return-1},a.confirmBooking=function(){if(a.tabForm.$valid){console.log("entered");var b=o(),c="";s(b,c)}},a.addMoreCard=function(){a.showSavedCard=!1,n(a.CONSTANT.CREDIT_CARD,"")},a.$on(e.LOGGED_IN,function(){console.log("method called"),u()})}],link:function(a,b,c){}}}),angular.module("newappApp").factory("checkoutDetailData",function(){var a={details:[],paymentOptions:[]};return a}),angular.module("newappApp").factory("NetBank",function(){var a={axis_nb:"axil-logo.jpg",citi_nb:"citybank-logo.jpg",hdfc_nb:"hdfc-bank.jpg",icici_nb:"icici-bank.jpg",sbi_nb:"state-bank.jpg",idbi_nb:"idbibank.jpg"};return a}),angular.module("newappApp").factory("Wallet",function(){var a={mobikwik_wallet:"mobikwik-logo.jpg",paytm_wallet:"paytm-logo.jpg",payu_wallet:"payumoney.jpg",airmo_cashc:"airtelmoney.jpg",freecharge_wallet:"freecharge-wallet.jpg",icash_cashc:"icashcard.jpg",itzno_cashc:"itscash.jpg",oxi_cashc:"oxigen.jpg",payc_cashc:"paycash.png",payzippy_wallet:"payzippy.png"};return a}),angular.module("newappApp").directive("creditCardType",["cardConstant",function(a){var b={require:"ngModel",scope:{ccinfotype:"="},link:function(b,c,d,e){function f(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0}function g(b){var c,d,e;for(b=(b+"").replace(/\D/g,""),d=0,e=a.length;e>d;d++)if(c=a[d],c.pattern.test(b))return c}function h(a){var b,c;return a=(a+"").replace(/\s+|-/g,""),/^\d+$/.test(a)?(b=g(a),b?(c=a.length,j.call(b.length,c)>=0&&(b.luhn===!1||f(a))):!1):!1}function i(a){var b;return a?(null!=(b=g(a))?b.type:void 0)||null:null}var j=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};e.$parsers.unshift(function(a){b.ccinfotype=i(a),e.$setValidity("invalid",h(a));var c=a;return e.$setViewValue(c),e.$render(),c})}};return console.log(b),b}]),angular.module("newappApp").directive("cardExpiration",function(){var a={require:"ngModel",scope:{ccinfomonth:"=",ccinfoyear:"="},link:function(a,b,c,d){a.$watch("[ccinfomonth,ccinfoyear]",function(b,c){var e=(new Date).getMonth()+1;e>=9&&(e="0".concat(e));var f=new Date(e+"-01-"+(new Date).getFullYear()),g=new Date(a.ccinfomonth+"-01-"+a.ccinfoyear);d.$setValidity("invalid",!1),(null==a.ccinfomonth||g>=f)&&d.$setValidity("invalid",!0)},!0)}};return a}),angular.module("newappApp").constant("checkoutConstant",{NETBANK:"nb",CREDIT_CARD:"cc",WALLET:"wallet",OTHER_OPTION:"op",EXPRESS:"express",EXPRESS_CC_VISA:"visa_cc_express",EXPRESS_CC_MAESTRO:"maestro_cc_express",EXPRESS_CC_AMEX:"amex_cc_express",EXPRESS_CC_MASTER:"mast_cc_express",EXPRESS_CC_DINERS:"dinec_cc_express",EXPRESS_CC_JCB:"jcb_cc_express",EXPRESS_CC_LASER:"laser_cc_express",EXPRESS_CC_UNKNOWN:"unkwn_cc_express",EXPRESS_DC_VISA:"visa_dc_express",EXPRESS_DC_MAESTRO:"maestro_dc_express",EXPRESS_DC_AMEX:"amex_dc_express",EXPRESS_DC_MASTER:"mast_dc_express",EXPRESS_DC_DINERS:"dinec_dc_express",EXPRESS_DC_JCB:"jcb_dc_express",EXPRESS_DC_LASER:"laser_dc_express",EXPRESS_DC_UNKNOWN:"unkwn_dc_express",EXPRESS_DEFAULT:"default_express",EXPRESS_CARD_TYPE_CREDIT:"CREDIT",EXPRESS_CARD_TYPE_DEBIT:"DEBIT",OPEN_LOGIN:"open_login",CLOSE_LOGIN:"close_login",LOGIN:"login",ROUNDTRIP:"roundtrip",PAYMENT:"payment",BUS:"bus",HOTEL:"hotel",TOUR:"tour",ACTIVITY:"activity",LOGGED_IN:"logged_in",COOKIE_FOR_LOGGED_IN:"_ga"}),angular.module("newappApp").directive("tyBusSummary",function(){return{scope:{summary:"=",discount:"="},templateUrl:"views/bussummary.html",restrict:"E",controller:["$scope","checkoutConstant",function(a,b){function c(b,c){var d=a.$watch(b,function(e,f){console.log("watch"),console.log(a.payment),console.log(a),void 0!=a[b]&&(d(),c())},!0)}a.reliabiltyPrice=0;var d=0;a.onwardPickupDetail={Details:[]},a.returnPickupDetail={Details:[]},a.discountAmount=0,a.reliability={Details:[" Make alternate arrangements if bus services are cancelled including arrangements in upgraded buses","Free Personal accident Insurance,  Coverage of Rs.1,00,000/- (Rupees One Lakh) for death or dismemberment during journey under Personal Accident Policy from Tata AIG General Insurance Company Ltd."]},a.changeReliabilityOption=function(b){1==b?a.reliabiltyPrice=d:a.reliabiltyPrice=0},c("summary",function(){console.log("printing summary"),console.log(a.summary),a.discount=a.summary.onwards.fareDetails.discountAmount,a.summary.mode==b.ROUNDTRIP&&(a.discount+=a.summary["return"].fareDetails.discountAmount);var c=a.summary.onwards.CompanyName,e=c.toUpperCase();a.showReliabilty="PUNBUS"!=e&&"10953"!=a.summary.onwards.CompanyId&&"11854"!=a.summary.onwards.CompanyId,d=1==a.showReliabilty&&1==a.isCheckedReliability?a.summary.onwards.fareDetails.insuranceFees+a.summary["return"].fareDetails.insuranceFees:0,a.reliabiltyPrice=d,a.onwardPickupDetail={Details:[a.summary.onwards.pickupDetails.PickupName,a.summary.onwards.pickupDetails.Address,a.summary.onwards.pickupDetails.PickupTime]},a.summary.mode==b.ROUNDTRIP&&(a.returnPickupDetail={Details:[a.summary["return"].pickupDetails.PickupName,a.summary["return"].pickupDetails.Address,a.summary["return"].pickupDetails.PickupTime]})})}],link:function(a,b,c){}}}),angular.module("newappApp").factory("OtherOption",function(){var a={can_nb:"canara_bank.jpg",iob_nb:"iob.jpg",pnbra_nb:"pnb.jpg",paypal_int:"paypal_logo.png"};return a}),angular.module("newappApp").directive("myTooltipTemplate",["$compile",function(a){return{restrict:"A",scope:{myTooltipScope:"=",myTooltipClass:"@"},link:function(b,c,d){function e(){var d=angular.element("<div class='"+b.myTooltipClass+"' ng-hide='hidden'>");d.append("<div ng-include='\""+f+"\"'></div>"),c.parent().append(d),c.on("mouseenter",function(){b.hidden=!1,b.$digest()}).on("mouseleave",function(){b.hidden=!0,b.$digest()});var e=b.$new(!0);angular.extend(e,b.myTooltipScope),a(d.contents())(e),a(d)(b)}var f=d.myTooltipTemplate;b.hidden=!0;b.$watch(b.myTooltipScope,function(a,c){angular.element(document.querySelector("."+b.myTooltipClass)).remove(),e()},!0);e()}}}]),angular.module("newappApp").factory("Card",function(){var a={mastercard:"mast_cc.png",visa:"visa_cc.png",amex:"amex_cc.png"};return a}),angular.module("newappApp").factory("cardConstant",function(){var a=/(\d{1,4})/g,b=[{type:"maestro",pattern:/^(5018|5020|5038|504[4-9]|5081|6002|6037|6038|6220|6304|6759|676[1-3])/,format:a,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:a,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:a,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:a,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:a,length:[13,14,15,16],cvcLength:[3],luhn:!0}];return b}),angular.module("newappApp").directive("cardCvv",["cardConstant",function(a){var b={require:"ngModel",scope:{ccinfotype:"="},link:function(b,c,d,e){function f(a){e.$setValidity("invalid",g(a,b.ccinfotype))}function g(a,b){var c,d;return b?(c=a.length,i.call(null!==(d=h(b))?d.cvcLength:void 0,c)>=0):a.length>=3&&a.length<=4}function h(b){var c,d,e;for(d=0,e=a.length;e>d;d++)if(c=a[d],c.type===b)return c}e.$parsers.unshift(function(a){return b.$watch("ccinfotype",function(){null!=a&&f(a)},!0),f(a),a});var i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1}}};return console.log(b),b}]),angular.module("newappApp").directive("tyLogin",function(){return{templateUrl:"views/login.html",restrict:"E",controller:["$scope","$rootScope","$timeout","checkoutConstant","FACEBOOK_CONSTANTS","GOOGLE_CONSTANTS","CheckoutService",function(a,b,c,d,e,f,g){a.loginDetail={email:null,password:null},a.popup={isOpen:!1},b.popUpVisibility=function(b){a.popup.isOpen=b},a.preventBubble=function(a){a.stopPropagation()},a.$on(e.SIGN_IN_LISTENER,function(b,c,e){console.log(c),console.log(e),void 0!==c.authResponse&&(console.log("facebook logged in"),a.$broadcast(d.LOGGED_IN))}),a.$on(f.SIGN_IN_LISTENER,function(b,c,e){console.log(c),console.log(e),null!==c.El&&(console.log("gmail logged in"),a.$broadcast(d.LOGGED_IN))}),a.signIn=function(c,e){if(null!==c&&null!==e){var f={email:c,password:e,remember:!1};g.checkLogin(f).then(function(c){console.log(c.data),c.data.success===!0&&(b.loggedIn=!0,a.popup.isOpen=!1,a.$broadcast(d.LOGGED_IN))})}},a.login={isOpen:!0},a.signInShow=function(b,c){b.preventDefault(),a.login.isOpen=c}}],link:function(a,b,c){}}}),angular.module("newappApp").directive("tyProcessing",function(){return{template:'<div class="process-wrapper"><center> <img src="images/spinnerTravelyaari.gif" ng-if="show" /></center><div class="active-screen" ng-if="show"></div></div>',scope:{show:"="},restrict:"E",transclude:!0,link:function(a,b,c){}}}),angular.module("newappApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/bussummary.html",'<div class="right"> <div class="alert"> <p>Note: Please complete this transaction in 15 minutes</p> </div> <!--End Alert Part--> <div class="tripDetails" id="tripDetails" ng-init="onwardOpen=true;returnOpen=false;"> <h3>Your Booking</h3> <div> <div style="padding-bottom:10px"> <p style="padding-bottom:10px" ng-click="onwardOpen=(onwardOpen==true?false:true)"> <a href class="blueLink">Onward Trip Details</a> <span class="accordian" ng-class="onwardOpen==false?\'accordian-plus\':\'accordian-minus\'"></span> </p> <div id="onwardTripDetails" ng-show="onwardOpen"> <div class="tripBox"> <p>{{::summary.onwards.fromCity}}</p> <p>{{::summary.onwards.journeyDate}}</p> </div> <div class="tripSep"><img src="images/direction.png" alt="To"></div> <div class="tripBox"> <p>{{::summary.onwards.toCity}}</p> <p>{{::CheckoutDetail.journeyDate2}}</p> </div> <div class="clearfix"></div> <div class="tripBox"> <p>{{::summary.onwards.CompanyName}}</p> <p><span>{{::CheckoutDetail.extra.onward.route.BusType}}</span></p> </div> <div class="tripSep"></div> <div class="tripBox"> <p> <div> <span>{{::summary.onwards.seats}}</span> </div> </p> <p><span><a class="blueLink" my-tooltip-template="views/tooltiptempl.html" my-tooltip-scope="onwardPickupDetail" my-tooltip-class="onwardTooltip">Pickup Details</a></span></p> </div> </div> </div> <div ng-if="::summary.mode==\'roundtrip\'" class="onwardDetails"> <p style="padding-bottom:10px" ng-click="returnOpen=(returnOpen==true?false:true)"> <a href class="blueLink">Return Trip Details</a> <span class="accordian" ng-class="returnOpen==false?\'accordian-plus\':\'accordian-minus\'"></span> </p> <div id="returnTripDetails" ng-show="returnOpen"> <div class="tripBox"> <p>{{::summary.return.fromCity}}</p> <p>{{::summary.return.journeyDate}}</p> </div> <div class="tripSep"><img src="images/direction.png" alt="To"></div> <div class="tripBox"> <p>{{::summary.return.toCity}}</p> <p>11:45 PM - 22 Feb, 2016</p> </div> <div class="clearfix"></div> <div class="tripBox"> <p>{{::summary.return.CompanyName}}</p> <p><span>{{::summary.return.BusType}}</span></p> </div> <div class="tripSep"></div> <div class="tripBox"> <p> <div> <span>{{::summary.return.seats}}</span> </div> </p> <p><span><a class="blueLink" my-tooltip-template="views/tooltiptempl.html" my-tooltip-scope="returnPickupDetail" my-tooltip-class="returnTooltip">Pickup Details</a></span></p> </div> </div> </div> </div> </div> <!--Return trip details--> <!--End Trip Summary--> <div class="clearfix"></div> <div class="fareDetails"> <h3>Fare Details</h3> <div> <div class="fareBlock1">Onward Trip Fare</div> <div class="fareBlock2">Rs. {{::summary.onwards.fareDetails.totalFare}}</div> <div class="fareBlock1">Return Trip Fare</div> <div class="fareBlock2">Rs. {{::summary.return.fareDetails.totalFare}}</div> <div class="fareBlock1">Service Tax ( <a href="#">?</a> )</div> <div class="fareBlock2">Rs. {{::(summary.onwards.fareDetails.serviceTax + summary.onwards.fareDetails.serviceTax)}}</div> <div ng-if="::showReliabilty"> <div class="fareBlock1"> <div class="checkbox_wrapper"> <input type="checkbox" ng-model="isCheckedReliability" ng-checked="true" ng-change="changeReliabilityOption(isCheckedReliability);"> <label></label> </div> I Want Reliability Service ( <a href my-tooltip-template="views/tooltiptempl.html" my-tooltip-scope="reliability" my-tooltip-class="reliabilityToolTip">?</a> ) </div> <div class="fareBlock2">Rs. {{::(summary.onwards.fareDetails.insuranceFees + summary.return.fareDetails.insuranceFees)}}</div> </div> <div class="fareBlock1">Other Charges</div> <div class="fareBlock2">Rs. {{::(summary.onwards.fareDetails.otherCharges + summary.return.fareDetails.otherCharges)}}</div> <div class="fareBlock1">Discount</div> <!--<div class="fareBlock2">Rs. {{::(summary.onwards.fareDetails.discountAmount + summary.return.fareDetails.discountAmount)}}</div>--> <div class="fareBlock2">Rs. {{discount}}</div> </div> <div class="fareTotal"> <div class="fareBlock1"> <h4>Total Fare</h4> </div> <div class="fareBlock2"> <h4>Rs.{{summary.onwards.fareDetails.totalFare + summary.return.fareDetails.totalFare+reliabiltyPrice-discount}}</h4> </div> </div> </div> <!--End Fare Details--> </div>'),a.put("views/checkout.html",'<ty-processing show="processing"></ty-processing> <article> <div class="center"> <div class="wrapper"> <div class="left"> <div class="payment"> <ty-your-details></ty-your-details> <ty-payment-method payment="PaymentOptions" tabinfo="tabInfo" token="token" customerdetail="customerDetail" orderid="CheckoutDetail.id"></ty-payment-method> </div> </div> <!--End Left Part--> <ty-bus-summary summary="CheckoutDetail.order_summary.bus_booking" discount="customerDetail.discount" ng-if="CheckoutDetail.type==1"></ty-bus-summary> <!--End Right Part--> </div> <!--End Footer--> </div> </article>'),a.put("views/login.html",'<user-popup settings="popup" ng-click="popUpVisibility(false)"> <div class="inner-popup"> <span class="close" ng-click="popUpVisibility(false)">&#10005;</span> <div ng-show="login.isOpen"> <strong>Sign In</strong> <div class="ty-auth-wrapper auth-wrapper"> <form name="signin" class="ty-form signin-form"> <label class="ty-input-block"> <span class="ty-user-label">Email</span> <input class="ty-user-input" type="email" placeholder="Enter your email" required ng-model="loginDetail.email"> </label> <label class="ty-input-block"> <span class="ty-user-label">Password</span> <input class="ty-user-input" type="password" placeholder="Enter your password" required ng-model="loginDetail.password"> </label> <div class="ty-alignright-block"> <button class="ty-alignright ty-user-button" ng-click="signIn(loginDetail.email,loginDetail.password);">Sign In</button> </div> <div class="ty-alignright-block forgot-pswd-block"> <a class="ty-alignright ty-forgot-password" ng-click="signInShow($event, false)">Forgot your password?</a> </div> </form> <div class="social-logins"> <user-fb>Sign In with Facebook</user-fb> <user-gmail>Sign In with Gmail</user-gmail> </div> </div> </div> <div ng-show="!login.isOpen"> <strong>Forgot Password</strong> <div class="ty-note note-message">Please enter your email address below. We\'ll send you an email with a link to reset password.</div> <div class="ty-auth-wrapper auth-wrapper"> <form name="signin" class="ty-form forgotpwd-form"> <label class="ty-input-block"> <span class="ty-user-label">Email</span> <input class="ty-user-input" type="email" placeholder="Enter your email" required> </label> <div class="ty-alignright-block"> <button class="ty-alignright ty-user-button">Sign In</button> </div> </form> </div> <span class="ty-back forgotpwd-back" ng-click="signInShow($event, true)">&lt;&lt; Back</span> </div> </div> </user-popup>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/paymentmethod.html",'<div class="paymentMethod" style="margin-top:100px; opacity: 0.2"> <div class="paymentTitle"> <span>2</span> <h4>Payment Method</h4> </div><!--End Title--> <div class="tabSection"> <ul> <li ng-repeat="option in payment.methods" id="{{::option.code}}" ng-class="{current:isSelected(option.code)}" ng-click="selectedOption(option.code);" class="{{::option.code}}">{{::option.label}} <div class="walletStrip" ng-if="::option.code==CONSTANT.WALLET">Offers Inside</div> <span ng-if="::option.code==CONSTANT.OTHER_OPTION">ATM Card / Paypal</span> </li> </ul> </div> <!--End Tab Section--> <div class="clearfix"></div> <div class="tabinfo-container" ng-show="tabinfo"> <input type="hidden" name="pay_method" id="method" value="{{method}}"> <input type="hidden" name="card_brand" id="brand" value="{{brand}}"> <input type="hidden" name="pay_provider" id="provider" value="{{provider}}"> <ng-form name="tabForm"> <div ng-show="isSelected(CONSTANT.CREDIT_CARD)"> <div class="debitTop"> <div class="securedLeft"> <img src="images/secured.png" alt="Secured"><!--<ty-show-img-on-load imgsrc="images/secured.png" class="ty-smooth-load"></ty-show-img-on-load>--> </div> <div class="securedInfo"> <p>Secured Debit / Credit Card Payment</p> <p><span>This is a secure 128-bit SSL encrypted payment</span></p> </div> <div class="entrust"><img src="images/entrust.png" alt="Secured Payment"></div> </div> <!--End Trust Part--> <div class="debitInfo" ng-show="!showSavedCard"> <input class="cardno" id="cardno" placeholder="Credit / Debit Card No" type="Credit / Debit Card No" name="cardno" ng-model="ccinfo.securityCode" ng-required="isSelected(CONSTANT.CREDIT_CARD)&&!showSavedCard" data-ng-pattern="/^[0-9]+$/" data-credit-card-type ccinfotype="ccinfo.type" ng-style="{\'background\':\'url(/images/\'+Card[ccinfo.type]+\') no-repeat center right\'}"> <!-- <span class="cardType"><img src="images/{{ccinfo.type}}.png"/></span>--> <!-- <div ng-messages="tabForm.cardno.$error" ng-if="tabForm.cardno.$dirty">\n                        <p ng-message="required" class="errMsg">This is required</p>\n                        <p ng-show="tabForm.cardno.$error.minlength">Credit card must be 15-19 digits</p>\n                    </div>--> <ul ng-show="tabForm.submitAttempt && !tabForm.$valid"> <li ng-show="tabForm.cardno.$error.minlength" class="errMsg">Credit card must be 15-19 digits</li> <li ng-show="tabForm.cardno.$error.pattern" class="errMsg">Credit card must consist of only numbers</li> <li ng-show="tabForm.cardno.$error.invalid" class="errMsg">Credit card must be a valid Amex, Visa, Discover, or Master Card</li> <li ng-show="tabForm.cardno.$error.required" class="errMsg">Credit card required</li> </ul> <input class="debitUser" placeholder="Credit / Debit Card Name" type="5s6s5s5s5" ng-required="isSelected(CONSTANT.CREDIT_CARD)&&!showSavedCard" name="debitUser" ng-model="ccinfo.name"> <ul ng-show="tabForm.submitAttempt && !tabForm.$valid"> <li ng-show="tabForm.debitUser.$error.required" class="errMsg">Name required</li> </ul> <input class="debitMonth" id="debitMonth" placeholder="MM" type="5s6s5s5s5" ng-required="isSelected(CONSTANT.CREDIT_CARD)&&!showSavedCard" name="debitMonth" ng-model="ccinfo.month" data-card-expiration ccinfomonth="ccinfo.month" ccinfoyear="ccinfo.year" ng-pattern="/^[0-1]+[0-9]+$/" ng-maxlength="2" ng-minlength="2" ng-keypress="checkKeyPressed($event)"> <div class="debitsep"><img src="images/debt-sep.png" alt="Sep"></div> <input class="debitMonth" id="debitYear" placeholder="YY" type="5s6s5s5s5" name="debitYear" ng-required="isSelected(CONSTANT.CREDIT_CARD)&&!showSavedCard" ng-minlength="4" ng-maxlength="4" ng-model="ccinfo.year" ng-keypress="checkKeyPressed($event)"> <input class="debitCvv" id="debitCVV" placeholder="CVV" type="5s6s5s5s5" ng-required="isSelected(CONSTANT.CREDIT_CARD)&&!showSavedCard" name="debitCvv" ng-model="ccinfo.cvv" ng-keypress="checkKeyPressed($event)" data-card-cvv ccinfotype="ccinfo.type" watchrequired="false"> <ul ng-show="tabForm.submitAttempt && !tabForm.$valid" style="float:right;width:35%;color:red"> <li ng-show="tabForm.debitCvv.$error.required">CVV required</li> <li ng-show="tabForm.debitCvv.$error.invalid">Invalid CVV</li> </ul> <ul ng-show="tabForm.submitAttempt && !tabForm.$valid" style="width:35%;float:left;color:red"> <li ng-show="tabForm.debitYear.$error.required">Expiration year required</li> <li ng-show="tabForm.debitMonth.$error.minlength">Month in 2 digit</li> <li ng-show="tabForm.debitYear.$error.minlength">Year in 4 digit</li> <li ng-show="tabForm.debitMonth.$error.maxlength">Month in 2 digit</li> <li ng-show="tabForm.debitYear.$error.maxlength">Year in 4 digit</li> <li ng-show="tabForm.debitMonth.$error.invalid">Provided expiration date is invalid</li> </ul> <div class="savethiscard"> <div class="checkbox_wrapper"> <input type="checkbox" checked ng-model="isCheckedSaveCard"> <label></label> </div> <p>Save this Card for Future Transation</p> </div> </div> <!--End Debit / Credit Card Info--> <!--saved card--> <div ng-show="showSavedCard"> <div class="cardTitle"> <div class="cardTitle-left"> <h4>Your Saved Card</h4> </div> <div class="cardTitle-right" ng-click="tabForm.submitAttempt=false;addMoreCard();"> <img src="images/add-card.png" alt="Add More Card"> <p><a href class="blackLink">Add More</a></p> </div> </div> <div class="debitInfo" ng-repeat="savedCard in SavedCards track by $index"> <div class="savedcard-section"> <div class="radio_wrapper" style="margin-top:23px"> <input type="radio" name="selectedCard" ng-checked="selectedCard.card_token==savedCard.card_token" ng-click="selectCard(savedCard);"> <label></label> </div> <input class="saved-cardno" type="Credit / Debit Card No" ng-model="savedCard.card_number" ng-style="{\'background\':\'url(\'+cardUrl+\') no-repeat center right\'}" readonly> <div class="remove-card" ng-click="removeSavedCard(savedCard)"> <img src="images/payment-delete.png" alt="Remove this Card"> <p><a href class="blackLink">Remove this Card</a></p> </div> <input class="debitCvv" placeholder="CVV" type="5s6s5s5s5" ng-model="selectedCard.cvv[savedCard.card_token]" ng-required="isSelected(CONSTANT.CREDIT_CARD)&& showSavedCard==true && selectedCard.card_token==savedCard.card_token"> </div> </div> </div> </div> <div ng-show="isSelected(CONSTANT.NETBANK)"> <div class="cardTitle"> <div class="cardTitle-left"> <h4>Choose from Popular Banks</h4> </div> </div> <div class="netbank-wrapper"> <div class="banklogo-wrapper"> <ul> <li ng-repeat="(nbProvider,nbName) in payment.options.nb.popular" ng-click="selectBank_popular(nbProvider);" ng-class="{option_select:isNetBankOptionSelected(nbProvider)}"> <a href><img ng-src="images/{{::NetBank[nbProvider]}}" alt="{{::nbName}}"></a> </li> </ul> </div> <div class="or-wrapper"> <p>or</p> </div> <select id="nbBank" name="nbBank" class="selectBank" ng-model="data.repeatSelect" ng-options="nbProvider as nbName for (nbProvider,nbName) in payment.options.nb.all" ng-change="selectBank_all(data.repeatSelect);"> <option></option> </select> </div> </div> <div ng-show="isSelected(CONSTANT.WALLET)"> <div class="wallet-wrapper" ng-show="!walletPopup"> <ul> <li ng-repeat="(walProvider,walName) in payment.options.wallet.previlaged" ng-class="{option_select:isWalletOptionSelected(walProvider)}" ng-click="selectWallet(walProvider)" class="wallet-privledge"> <a href> <img src="images/{{Wallet[walProvider]}}" alt="{{walName}}"> <p>{{::walletMsg[walProvider]}}</p> <p><span>{{::walletSubtitle[walProvider]}}</span></p> </a> </li> <li ng-repeat="(walProvider,walName) in payment.options.wallet.all" ng-if="::checkIfSelectedInData(walProvider,payment.options.wallet.previlaged)!=1" ng-class="{option_select:isWalletOptionSelected(walProvider)}" ng-click="selectWallet(walProvider)"> <a href><img ng-src="images/{{Wallet[walProvider]}}" alt="{{walName}}"></a> <div class="wallet-strip">{{::walletMsg[walProvider]}}</div> </li> </ul> </div> <div class="wallet-popup" ng-show="walletPopup"> <div class="wallet-pop-left"> <img src="images/{{Wallet[provider]}}"> </div> <div class="wallet-pop-right"> <div style="float:left;width:95%"> <p>{{walletMsg[provider]}}</p> <span>{{walletSubtitle[provider]}}</span> </div> <div ng-click="walletPopup=false" style="cursor:pointer">X</div> </div> <div style="border-bottom: solid 1px #ddd;float:left;width:100%;padding-top:2%"></div> <div class="wallet-pop-body"> <p>You have selected {{payment.options.wallet.all[provider]}}</p> <div class="wallet-terms"> <div> Plese read the terms and condition </div> <div ng-bind-html="walletTnc[provider]"> </div> </div> </div> </div> </div> <div ng-show="isSelected(CONSTANT.OTHER_OPTION)"> <div class="otherpay-wrapper"> <div class="banklogo-wrapper"> <ul> <li ng-repeat="(opProvider,opName) in payment.options.op.all" ng-if="::checkIfSelectedInData(opProvider,payment.options.op.others)!=1" ng-class="{option_select:isOtherOptionSelected(opProvider)}" ng-click="selectOtherOption(opProvider)"> <a href><img src="images/{{::OtherOption[opProvider]}}" alt="{{::opProvider}}"></a> </li> </ul> </div> <div class="or-wrapper"> <p>or</p> </div> <div class="paypal-wrapper"> <ul> <!--<li>\n                                <a href><img src="images/mobikwik-logo.jpg" alt="Ola Money Wallet Offer"></a>\n                                <p>Total charges including forex and transaction fees: {{paypalAmount}}</p>\n                            </li>--> <li ng-repeat="(opProvider,opName) in payment.options.op.others" ng-class="{option_select:isOtherOptionSelected(opProvider)}" ng-click="selectOtherOption(opProvider)"> <a href><img src="images/{{::OtherOption[opProvider]}}" alt="{{::opProvider}}"></a> <p>Total charges including forex and transaction fees: {{paypalAmount}}</p> </li> </ul> </div> </div> </div> <div class="action-wrapper"> <button type="submit" class="action" ng-click="tabForm.submitAttempt=true;confirmBooking()">Confirm My Booking</button> </div> <div class="termsconditions"> <div class="termsLeft">I Agree to <a href class="blackLink">Terms & Conditions</a></div> <div class="termsRight" style="display:none"> <img src="images/secured-small.png" alt="Secured Payment"> <p> Secure 128-bit SSL <br> encrypted payment. </p> <a href><img src="images/entrust-logo-small.png" alt="Secured Payment" class="btmLogo"></a> </div> </div> <!--End Terms and Condition--> </ng-form> </div> <div id="pgSubmission" ng-bind-html="pgSubmission"></div> <div class="juspay_payment_inline" style="display:none"> <form class="juspay_inline_form" id="juspay_payment_form"> <input type="hidden" ng-model="merchant_id" value="merchant_id_inline"> <input type="hidden" ng-model="order_id" value="orderid"> <input type="text" ng-model="card_number" value="ccinfo.securityCode"> <input type="text" ng-model="name_on_card" value="ccinfo.name"> <input type="text" ng-model="card_exp_month" value="ccinfo.month"> <input type="text" ng-model="card_exp_year" value="ccinfo.year"> <input type="text" ng-model="security_code" value="ccinfo.cvv"> <input type="checkbox" ng-checked="juspay_locker_save"> <input type="hidden" ng-model="redirect" value="true"> </form> </div> <div class="juspay_payment_express" style=""> <form class="juspay_express_form" id="juspay_payment_form_express"> <input type="hidden" ng-model="merchant_id_express" value="abc"> <input type="hidden" ng-model="order_id_express" value="{{orderid}}"> <input type="hidden" ng-model="card_token_express" value="{{selectedCard.card_token}}"> <input type="text" ng-model="security_code_express" value="{{selectedCard.cvv[selectedCard.card_token]}}"> <input type="hidden" ng-model="redirect" value="true"> </form> </div> </div>'),
a.put("views/tooltiptempl.html",'<div class="tool-tip-wrapper"> <div ng-repeat="detail in Details"> {{detail}} </div> </div>'),a.put("views/yourdetail.html",'<div class="passengerDetails"> <div ng-show="firstSection" class="firstSection"> <ng-form name="detailForm"> <div class="yourdetail-wrapper"> <div class="paymentTitle"> <span>1</span> <h4>Your Details</h4> </div> <div class="yourdetail-left"> <input class="detials" placeholder="Email Address" type="email" name="email" ng-model="customerDetail.email" ng-required="true" ng-keypress="checkKeyPressed($event)" id="emailInput"> <ul ng-show="detailForm.submitAttempt && !detailForm.$valid"> <li ng-show="detailForm.email.$error.required" class="errMsg">Email required</li> </ul> <input class="detials" placeholder="Apply coupon code here" type="5s6s5s5s5" name="coupon" id="couponInput" ng-model="customerDetail.coupon" ng-keypress="checkKeyPressed($event)"> <label class="coupon-msg" ng-style="customerDetail.discount!=0?{\'color\':\'green\'}:{\'color\':\'red\'}">{{couponMsg}}</label> </div> <div class="yourdetail-right"> <input class="detials" placeholder="Mobile No" type="Credit / Debit Card No" name="mobile" ng-model="customerDetail.mobile" ng-required="true" id="phoneInput" ng-keypress="checkKeyPressed($event)" ng-minlength="10"> <ul ng-show="detailForm.submitAttempt && !detailForm.$valid"> <li ng-show="detailForm.mobile.$error.required" class="errMsg">Mobile no required</li> <li ng-show="detailForm.mobile.$error.minlength" class="errMsg">should be 10 digit</li> </ul> <button type="submit" class="action01" ng-click="detailForm.submitAttempt=true;confirmBooking()">Confirm My Booking</button> </div> </div>  </ng-form></div> <div ng-show="!firstSection"> <div class="yourInfo"> <img src="images/success-tick.png" alt="Succes Tick"> <h3>Your Details</h3> <div class="block"> <p>Email Address</p> <h4>{{customerDetail.email}}</h4> </div> <div class="block"> <p>Phone No</p> <h4>{{customerDetail.mobile}}</h4> </div> </div> <!--End Your Info--> <div class="edit" ng-click="edit();"><a href class="blueLink">Edit</a></div> </div> </div>')}]);